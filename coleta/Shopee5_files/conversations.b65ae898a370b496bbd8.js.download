(self.miniJsonp=self.miniJsonp||[]).push([[4997],{78232:function(e,r,t){var o;o=(e,r,t,o,n)=>(()=>{"use strict";var a={383:r=>{r.exports=e},975:e=>{e.exports=r},511:e=>{e.exports=t},644:e=>{e.exports=o},855:e=>{e.exports=n}},s={};function c(e){var r=s[e];if(void 0!==r)return r.exports;var t=s[e]={exports:{}};return a[e](t,t.exports,c),t.exports}c.d=(e,r)=>{for(var t in r)c.o(r,t)&&!c.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},c.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{c.r(l),c.d(l,{activeListTabSelector:()=>s,allConversationIdsSelector:()=>E,conversationBeenDeletedSelector:()=>de,conversationDirectionSelector:()=>D,conversationHttpStatusSelector:()=>w,conversationIdsSelector:()=>I,conversationLastMessageSelector:()=>qe,conversationsSelector:()=>U,curConvsMessageSelector:()=>or,curMessagesRelatedSelector:()=>Je,currentBuyerIdSelector:()=>H,currentBuyerSelector:()=>te,currentBuyerShopIdSelector:()=>oe,currentBuyerShopSelector:()=>ne,currentConversationBuyerIdSelectors:()=>Q,currentConversationCanReadSelector:()=>N,currentConversationHasLoadingSelector:()=>Me,currentConversationIdSelector:()=>L,currentConversationMaxOptionHideTimeSelectors:()=>X,currentConversationSelector:()=>V,currentConversationShopIdSelectors:()=>q,currentConversationShopRegionSelectors:()=>K,currentConversationShopSelectors:()=>J,currentConversationStatusSelectors:()=>W,currentConversationToNameSelector:()=>ue,currentConversationTranslationAccessSelector:()=>le,currentPendingOffersCountSelector:()=>me,currentSellerAccountIdSelector:()=>Ce,currentShopIdSelector:()=>re,defaultCount:()=>_e,degradeConversationIdsSelector:()=>x,feedbackSelector:()=>lr,filterSelector:()=>F,filteredConversationsSelector:()=>Y,getConversation:()=>Z,getConversationPendingOffersCountSelector:()=>ye,getConversationShopId:()=>$,getConversationShopRegion:()=>Te,getConversations:()=>ee,getConversationsSelector:()=>y,getConvsMessagesRelatedSelector:()=>Ke,getMessageSelector:()=>He,inlocationSelector:()=>P,isNavigateToUnreadMessageSelector:()=>pe,keywordSelector:()=>ae,listsHashSelector:()=>ie,mediaListSelector:()=>cr,messagesRelatedMapSelector:()=>Fe,missedReadNoticeCountSelector:()=>O,navigateToUnreadMessageIdSelector:()=>ge,noticesCountSelector:()=>dr,pinnedConversationIdsSelector:()=>b,readRequestIdsSelector:()=>M,reconnectFlagSelector:()=>ir,redirectionInfoSelector:()=>Oe,replyToMessageSelector:()=>sr,resultsSelector:()=>se,reverseMessagesSelector:()=>$e,searchConversationHttpStatusSelector:()=>ce,selectVideoInfoByKey:()=>Ge,selectVideoInfoKeyByVid:()=>Ve,serveTodayAllConversationIdsSelector:()=>m,serveTodayAutoRepliedConversationIdsSelector:()=>g,serveTodayAutoRepliedConversationsSelector:()=>C,serveTodayConversationHttpStatusSelector:()=>d,serveTodayConversationsSelector:()=>h,serveTodayFolderStatusSelector:()=>i,serveTodayManuallyRepliedConversationIdsSelector:()=>f,serveTodayManuallyRepliedConversationsSelector:()=>_,serveTodayOnlyConversationsSelector:()=>R,serveTodayPinnedConversationIdsSelector:()=>S,serveTodayUnrepliedConversationIdsSelector:()=>p,serveTodayUnrepliedConversationsSelector:()=>T,shopAccessSelector:()=>Se,showFrozenTipSelector:()=>be,showLoadingMessagesMapSelector:()=>Ee,singleConversationIdsSelector:()=>v,singleConversationMarkInfoSelector:()=>Ie,singleConversationStateSelector:()=>u,sortedConversationsSelector:()=>G,totalConversationsCountSelector:()=>he,twoTabsAllConversationIdsSelector:()=>Pe,updateTimeNowSelector:()=>A});var e=c(383),r=c(975),t=c(511),o=c(644),n=c(855),a=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.serveToday)||{}},s=(0,r.createSelector)(a,(e=>e.activeListTab)),i=(0,r.createSelector)(a,(e=>e.folderStatus)),d=(0,r.createSelector)(a,(e=>e.status||"")),u=e=>(0,r.createSelector)(a,(r=>r[e]||{})),v=e=>(0,r.createSelector)(u(e),(e=>e.conversationIds||[])),S=(0,r.createSelector)(a,(e=>(e[n.ServeTodayTab.PINNED]||{}).conversationIds||[])),p=(0,r.createSelector)(a,(e=>(e[n.ServeTodayTab.UNREPLIED]||{}).conversationIds||[])),g=(0,r.createSelector)(a,(e=>(e[n.ServeTodayTab.AUTOREPLY]||{}).conversationIds||[])),f=(0,r.createSelector)(a,(e=>(e[n.ServeTodayTab.MANUALREPLY]||{}).conversationIds||[])),m=(0,r.createSelector)(S,p,g,f,((e,r,t,o)=>[...e,...r,...t,...o])),y=n=>(0,r.createSelector)(t.conversationEntitiesSelector,v(n),((r,t)=>((0,e.denormalize)(t,[o.conversationSchema],{conversations:r})||[]).filter(Boolean))),T=(0,r.createSelector)(y(n.ServeTodayTab.UNREPLIED),(e=>(e.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))),e))),C=(0,r.createSelector)(y(n.ServeTodayTab.AUTOREPLY),(e=>e.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))))),_=(0,r.createSelector)(y(n.ServeTodayTab.MANUALREPLY),(e=>e.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))))),h=(0,r.createSelector)(i,y(n.ServeTodayTab.PINNED),T,C,_,((e,r,t,o,a)=>{var s=[],c={[n.ServeTodayTab.PINNED]:r,[n.ServeTodayTab.UNREPLIED]:t,[n.ServeTodayTab.AUTOREPLY]:o,[n.ServeTodayTab.MANUALREPLY]:a},l=r.map((e=>e.id))||[];return n.ServeTodayFolders.forEach((r=>{var t=c[r];r!==n.ServeTodayTab.PINNED&&(t=t.filter((e=>!l.includes(e.id)))),t.length&&(s=e[r]?s.concat([{key:r,id:"".concat(r,"Tab")},...t]):s.concat([{key:r,id:"".concat(r,"Tab")}]))})),s})),R=(0,r.createSelector)(h,(e=>e.filter((e=>!e.id.includes("Tab"))))),I=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.conversationIds)||[]},b=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.pinnedConversationIds)||[]},E=(0,r.createSelector)(I,b,((e,r)=>{var t=e.filter((e=>!r.includes(e)));return r.concat(t)})),M=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.readRequestIds)||[]},O=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.missedReadNoticeCount)||0},P=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.inlocation)||!1},A=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.updateTimeNow)||"0"},L=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.currentConversationId)||null},N=e=>{var r;return(0,t.judgeUndefined)({defaultValue:!0,value:null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.currentConversationCanRead})},w=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.status)||""},D=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.direction)||""},U=(0,r.createSelector)(t.conversationEntitiesSelector,E,((r,t)=>((0,e.denormalize)(t,[o.conversationSchema],{conversations:r})||[]).filter(Boolean))),j=(0,r.createSelector)(U,L,((e,r)=>e.filter((e=>{var{id:t,unread_count:o}=e;return e&&(o>0||t===r)})))),z=(0,r.createSelector)(U,(e=>e.filter((e=>e.isPinned)))),k=(0,r.createSelector)(U,(e=>e.filter((e=>e.status&&"closed"===e.status)))),B=(0,r.createSelector)(U,L,((e,r)=>e.filter((e=>{var{unreplied:t,id:o}=e;return void 0===t||t||!t&&o===r})))),x=(0,r.createSelector)(U,(e=>e.filter((e=>e.lack)).map((e=>e.id))||[])),F=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.filter)||"All"},Y=(0,r.createSelector)(F,U,j,z,k,B,((e,r,t,o,n,a)=>({All:r,Unread:t,Pinned:o,Closed:n,Unreplied:a}[e]))),G=(0,r.createSelector)(Y,b,t.waitingTimeFilterSelector,F,((e,r,t,o)=>{var n=e.filter((e=>!r.includes(e.id))),a=e.filter((e=>r.includes(e.id)));return n.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))),a.concat(n).filter((e=>void 0===e.faking))})),V=(0,r.createSelector)(U,h,L,t.isSubAccountSelector,P,t.userEntitiesSelector,t.conversationEntitiesSelector,t.showChatServingFeatureSelector,((r,t,n,a,s,c,l,i)=>{var d=(i?[...r,...t]:r).find((e=>e.id===n))||{};if(s&&!d.id&&(d=(0,e.denormalize)(n,o.conversationSchema,{conversations:l})||{}),!a&&d.lack){var u=d.to_id,v=(0,e.denormalize)(u,o.userSchema,{users:c})||{},S={to_shop_id:v.shop_id,to_status:v.status,to_name:v.name||"-",to_avatar:v.avatar};return Object.assign(d,S)}return d})),H=(0,r.createSelector)(V,(e=>{var{to_id:r}=e||{};return r||null})),J=(0,r.createSelector)(V,t.shopsEntitiesSelector,((r,t)=>(0,e.denormalize)(r.shop_id,o.shopSchema,{shops:t})||{})),K=(0,r.createSelector)(J,(e=>(null==e?void 0:e.country)||"SG")),q=(0,r.createSelector)(V,(e=>e.shop_id)),Q=(0,r.createSelector)(V,(e=>e.to_id)),W=(0,r.createSelector)(V,(e=>e.status)),X=(0,r.createSelector)(V,(e=>e.max_general_option_hide_time)),Z=n=>(0,r.createSelector)(t.conversationEntitiesSelector,(r=>(0,e.denormalize)(n,o.conversationSchema,{conversations:r})||{})),$=e=>(0,r.createSelector)(Z(e),(e=>e.shop_id)),ee=e=>(0,r.createSelector)(U,h,t.showChatServingFeatureSelector,((r,t,o)=>{var n=o?[...r,...t]:r;return e.map((e=>n.find((r=>r.id===e)))).filter(Boolean)})),re=(0,r.createSelector)(V,(e=>{var{shop_id:r}=e||{};return r||null})),te=(0,r.createSelector)(t.userEntitiesSelector,V,((r,t)=>t?(0,e.denormalize)(t.to_id,o.userSchema,{users:r}):{})),oe=(0,r.createSelector)(V,(e=>{var{to_shop_id:r}=e||{};return r||null})),ne=(0,r.createSelector)(oe,t.shopsEntitiesSelector,((r,t)=>(0,e.denormalize)(r,o.shopSchema,{shops:t})||{})),ae=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.keyword)||""},se=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.results)||[]},ce=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.searchStatus)||""},le=(0,r.createSelector)(V,(e=>e.translationAccess)),ie=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.listsHash)||{}},de=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.conversationBeenDeleted)||!1},ue=(0,r.createSelector)(V,(e=>{var{to_name:r}=e||{};return r})),ve={hasSCAccess:!0,hasEditOrderAccess:!0,hasViewOrderAccess:!0,hasViewProductAccess:!0,hasEditVoucherAccess:!0,hasViewVoucherAccess:!0,hasViewRrOrderAccess:!0,hasOrderDetailAccess:!0},Se=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.access)||ve},pe=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.isNavigateToUnreadMessage)||!1},ge=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.navigateToUnreadMessageId)||""},fe=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.pendingOffersCount)||{}},me=(0,r.createSelector)(V,fe,((e,r)=>{var{shop_id:t,to_id:o}=e;return r["".concat(t,"_").concat(o)]||0})),ye=e=>(0,r.createSelector)(Z(e),fe,((e,r)=>{var{shop_id:t,to_id:o}=e;return r["".concat(t,"_").concat(o)]||0})),Te=n=>(0,r.createSelector)($(n),t.shopsEntitiesSelector,((r,t)=>{var n=(0,e.denormalize)(r,o.shopSchema,{shops:t})||{};return(null==n?void 0:n.country)||"SG"})),Ce=(0,r.createSelector)(t.isSubAccountSelector,t.currentUserIdSelector,J,((e,r,t)=>e?t.user_id:r)),_e={unrepliedCount:0,duesoonCount:0,overdueCount:0,pinnedCount:0,unreadCount:0,serveTodayUnrepliedCount:0,serveTodayDuesoonCount:0,serveTodayOverdueCount:0,serveTodayPinnedCount:0,serveTodayBotRepliedCount:0,serveTodayManualRepliedCount:0},he=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.totalConversationsCount)||_e},Re=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.conversationMark)||{}},Ie=e=>(0,r.createSelector)(Re,(r=>r[e])),be=(0,r.createSelector)(t.shopTranslationSettingsSelector,t.isSubAccountSelector,re,t.currentUserShopIdSelector,((e,r,t,o)=>{var n=r?t:o,{userStatus:a}=e[n]||{};return"frozen"===a})),Ee=e=>{var r;return null===(r=e.conversationReducer)||void 0===r?void 0:r.showLoadingMessagesMap},Me=(0,r.createSelector)(L,Ee,((e,r)=>{var t=r&&r[e];return(Object.entries(t||{})||[]).some((([e,r])=>null==r?void 0:r.showLoading))})),Oe=e=>{var r;return null===(r=e.conversationReducer)||void 0===r?void 0:r.redirectionInfo},Pe=(0,r.createSelector)(t.showChatServingFeatureSelector,E,m,((e,r,t)=>e?[...r,...t]:r));function Ae(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Le(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function Ne(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Le(Object(t),!0).forEach((function(r){Ae(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var we,{MSG_TYPE_OFFER:De,MSG_TYPE_ORDER:Ue,MSG_TYPE_PRODUCT:je,MSG_TYPE_FAQ_UNSUPPORTED:ze,MSG_TYPE_FAQ_LIVEAGENT_PROMPT:ke,MSG_TYPE_RATE_CARD:Be}=n.MessageTypes,xe=[Ue,je],Fe=(0,r.createSelector)((e=>e),(e=>(e.messageReducer||{}).messagesRelatedMap||{})),Ye=e=>{var r;return(null===(r=e.messageReducer)||void 0===r?void 0:r.videoMap)||{}},Ge=e=>(0,r.createSelector)(Ye,(r=>JSON.parse(JSON.stringify(r[e]||{})))),Ve=e=>(0,r.createSelector)(Ye,(r=>Object.keys(r).find((t=>r[t].vid===e)))),He=n=>(0,r.createSelector)(t.messageEntitiesSelector,(r=>(0,e.denormalize)(n,o.messageSchema,{messages:r}))),Je=(0,r.createSelector)(L,Fe,((e,r)=>r[e]||{all:[]})),Ke=e=>(0,r.createSelector)(Fe,(r=>r[e]||{all:[],sending:[],failed:[]})),qe=(we=e=>(0,r.createSelector)(Ke(e),Z(e),t.messageEntitiesSelector,((e,r,o)=>(0,t.getConversationLastMessage)(e,r,o))),function(){var e=Array.prototype.slice.call(arguments);return e in(we.memoize=we.memoize||{})?we.memoize[e]:we.memoize[e]=we.apply(this,e)}),Qe=(0,r.createSelector)(Je,(e=>{var r=[...e.all||[]];return e.securityTipsMessageId&&r.push(e.securityTipsMessageId),r})),We=(0,r.createSelector)(Je,(e=>e.sending||[])),Xe=(0,r.createSelector)(Je,(e=>e.failed||[])),Ze=(0,r.createSelector)(t.messageEntitiesSelector,Qe,((r,t)=>((0,e.denormalize)(t,[o.messageSchema],{messages:r})||[]).filter(Boolean))),$e=(0,r.createSelector)(Ze,(e=>e.reverse())),er=(0,r.createSelector)(V,$e,((e,r)=>e?r.filter(Boolean).reduce(((e,r)=>{var{type:t,source_type:o,source_content:n,content:a}=r;if(!o||t===De||[-1,0].includes(n["".concat(o,"_id")]))return e;if(xe.includes(t)&&n){var s="".concat(t,"_id");if(a[s]===n[s])return e}var{lastSourceMessage:c,sourceList:l}=e;if(!l.length)return{sourceList:l.concat(r),lastSourceMessage:r};if(o===je){var i=null==n?void 0:n.product_id,d=c.source_content&&c.source_content.product_id;if(!i||d===i)return e}else if(o===Ue){var u=null==n?void 0:n.order_id,v=c.source_content&&c.source_content.order_id;if(!u||[-1,0,v].includes(u))return e}return{sourceList:l.concat(r),lastSourceMessage:r}}),{sourceList:[],lastSourceMessage:null}).sourceList:[])),rr=(0,r.createSelector)(er,(e=>e.map((e=>e.id)))),tr=(0,r.createSelector)(t.entitiesSelector,Ze,((r,t)=>{var n=t.filter((e=>e&&e.type===De)).map((e=>e.content.offer_id));return(0,e.denormalize)(n,[o.offerSchema],r)})),or=(0,r.createSelector)($e,rr,We,Xe,V,t.rateCardEntitiesSelector,tr,((e,r,t,o,a,s,c)=>a?e.filter((e=>{if(!e)return!1;var{content:r,type:t}=e;return!(![ze,ke].includes(t)&&(!r||r&&0===Object.keys(r).length))})).map((e=>{var a=t.includes(e.id)?n.MessageSendStatus.SENDING:o.includes(e.id)?n.MessageSendStatus.FAILED:e.send_status?n.MessageSendStatus.SUCCEED:null,l=r.includes(e.id),i=Object.assign({},e,{send_status:a,hasMessageSource:l}),{type:d,content:u={},message_option:v}=i;switch(d){case De:var S=c.find((e=>e&&e.id===u.offer_id));i=Object.assign({},i,{textContent:S});break;case Be:var p=s[u.card_id];p&&(i=Object.assign({},i,{textContent:p}))}return(0,n.hasTargetMessageOption)(v,n.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=Ne(Ne({},i),{},{send_status:n.MessageSendStatus.FAILED,errorCode:n.MessageErrorCode.BLACKLIST})),i})):[])),nr=(0,r.createSelector)((e=>{var r;return null==e||null===(r=e.messageReducer)||void 0===r?void 0:r.reply}),(e=>e?e.toMessageId:{})),ar=(0,r.createSelector)(L,nr,((e,r)=>r[e]||"")),sr=(0,r.createSelector)(ar,t.messageEntitiesSelector,((r,t)=>(0,e.denormalize)(r,o.messageSchema,{messages:t}))),cr=(0,r.createSelector)(L,(e=>{var r;return(null===(r=e.mediaPreviewerReducer)||void 0===r?void 0:r.mediaMap)||{}}),((e,r)=>r[e]||[])),lr=e=>{var r;return(null==e||null===(r=e.socketReducer)||void 0===r?void 0:r.feedback)||void 0},ir=e=>{var r;return(null==e||null===(r=e.socketReducer)||void 0===r?void 0:r.reconnectFlag)||!1},dr=e=>{var r;return(null==e||null===(r=e.socketReducer)||void 0===r?void 0:r.noticesCount)||0}})(),l})(),e.exports=o(t(82677),t(20573),t(53402),t(96961),t(29494))},66633:function(e,r,t){"use strict";e.exports=t(78232)}}]);